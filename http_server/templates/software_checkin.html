{% extends "base.html" %}

{% block content %}
    <meta http-equiv="refresh" content="60; url = {{ PageURL }}"/>

    <script>
        function DeleteOldCheckinData() {
            let r = confirm("You will lose previous Log Entries\nThis cannot be undone\nAre you sure?");
            if (r === true) {
                window.location = "/ClearOldCheckinData"
            }
        }
    </script>

    <fieldset style="text-align: center; max-width: 850px;">
    <div>
        <h3><u><strong>
            <a style="color: red;" href="{{ PageURL }}">Sensor Checkin Statistics</a>
        </strong></u></h3>

        <h4 style="color: #F4A460;">This will automatically refresh every 60 seconds</h4>

        <br>

        <p style="color: red; font-size: large;">Total Sensors in Database: {{ SensorsInDatabase }}</p>

        <br>

        <button class="mui-btn mui-btn--raised mui--bg-color-indigo-900 mui--color-blue-200"
                onclick="DeleteOldCheckinData();">
            Clear Old Check-ins
        </button>

        <br>
        <br>

        <h4><u><strong>
            <a style="color: red;">Sensor Contacts in the past</a>
        </strong></u></h4>

        <p style="color: red; font-size: large;">hour: {{ TotalSensorCountHour }}</p>
        <p style="color: red; font-size: large;">12 hours: {{ TotalSensorCountHour12 }}</p>
        <p style="color: red; font-size: large;">1 Day: {{ TotalSensorCountDay }}</p>
        <p style="color: red; font-size: large;">7 Days: {{ TotalSensorCountWeek }}</p>
        <p style="color: red; font-size: large;">4 Weeks: {{ TotalSensorCountMonth }}</p>

        <br>
        <form id="mqtt-form" class="mui-form" method="POST" action="/SaveCheckinSettings">
            <div class="mui-textfield">
                <label style="color: red; font-size: medium;">
                    Check-in times are in UTC 0
                    <br>
                    Offset time by Hour(s)
                    <br>
                    <input style="width: 50px;" type="number" min="-23.0" max="23.0" step="0.25" name="checkin_hour_offset"
                           value="{{ CheckinHourOffset }}">
                </label>
            </div>
            <br>
            <button type="submit" class="mui-btn mui-btn--raised">Update</button>
        </form>

        <br>
        <br>

        <span style="color: greenyellow; white-space: pre-wrap;">{{ CheckinSensorStatistics }}</span>
    </div>
</fieldset>



{% endblock %}
