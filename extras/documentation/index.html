<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en" xmlns="http://www.w3.org/1999/html">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">

    <title>Kootnet Sensors Documentation</title>

    <link rel="shortcut icon" href="/atpro/assets/AT-pro-logo.png" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="/extras/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/documentation/css/stroke.css">
    <link rel="stylesheet" type="text/css" href="/documentation/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/documentation/css/animate.css">
    <link rel="stylesheet" type="text/css" href="/documentation/css/prettyPhoto.css">
    <link rel="stylesheet" type="text/css" href="/documentation/css/style.css">

    <link rel="stylesheet" type="text/css" href="/documentation/js/syntax-highlighter/styles/shCore.css" media="all">
    <link rel="stylesheet" type="text/css" href="/documentation/js/syntax-highlighter/styles/shThemeRDark.css" media="all">

    <!-- CUSTOM -->
    <link rel="stylesheet" type="text/css" href="/documentation/css/custom.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
    <div id="wrapper">
        <div class="container">
            <section id="top" class="section docs-heading">
                <div class="row">
                    <div class="col-md-12">
                        <div class="big-title text-center">
                            <h1>Kootnet Sensors</h1>
                        </div>
                    </div>
                </div>

                <hr>
            </section>
            <!-- end section -->

            <div class="row">
                <div class="col-md-3">
                    <nav class="docs-sidebar" data-spy="affix" data-offset-top="300" data-offset-bottom="200" role="navigation">
                        <ul class="nav">
                            <li><a href="#line1">Introduction</a></li>
                                <li><a href="#line2">Installation & Removal</a>
                                    <ul class="nav">
                                    <li><a href="#line2_1">GUI Installation</a></li>
                                    <li><a href="#line2_2">Terminal Installation</a></li>
                                    <li><a href="#line2_3">Terminal Removal</a></li>
                                </ul>
                            </li>
                            <li><a href="#line3">Web Portal Intro</a>
								<ul class="nav">
                                    <li><a href="#line3_1">General Overview</a></li>
                                    <li><a href="#line3_2">Dashboard</a></li>
                                    <li><a href="#line3_3">Sensor Readings</a></li>
                                    <li><a href="#line3_4">Sensor Latency</a></li>
                                    <li><a href="#line3_5">Notes</a></li>
                                    <li><a href="#line3_6">Graphing</a></li>
                                    <li><a href="#line3_7">MQTT Subscriber</a></li>
                                    <li><a href="#line3_8">Sensor Check-ins</a></li>
                                </ul>
							</li>
                            <li><a href="#line6">Remote Management</a>
								<ul class="nav">
                                    <li><a href="#line6_1">IP List & Login</a></li>
                                    <li><a href="#line6_2">Checks & Downloads</a></li>
                                    <li><a href="#line6_3">Push Configurations</a></li>
                                    <li><a href="#line6_4">Push System Commands</a></li>
                                </ul>
							</li>
							<li><a href="#line4">Settings</a>
								<ul class="nav">
                                    <li><a href="#line4_1">Main / Primary</a></li>
                                    <li><a href="#line4_2">Installed Sensors</a></li>
                                    <li><a href="#line4_3">Display</a></li>
                                    <li><a href="#line4_4">Sensor Checkins</a></li>
                                    <li><a href="#line4_5">Interval Recording</a></li>
                                    <li><a href="#line4_6">High/Low Triggers</a></li>
                                    <li><a href="#line4_7">Variance Triggers</a></li>
                                    <li><a href="#line4_8">Email</a></li>
                                    <li><a href="#line4_9">MQTT</a></li>
                                    <li><a href="#line4_10">3rd Party Services</a></li>
                                </ul>
							</li>
                            <li><a href="#line5">System</a>
								<ul class="nav">
                                    <li><a href="#line5_1">Databases</a></li>
                                    <li><a href="#line5_2">View Versions & Configurations</a></li>
                                    <li><a href="#line5_3">Networking</a></li>
                                    <li><a href="#line5_4">SSL</a></li>
                                    <li><a href="#line5_5">Change Login</a></li>
                                    <li><a href="#line5_6">Upgrades & Power</a></li>
                                    <li><a href="#line5_7">Logs</a></li>
                                </ul>
							</li>
                            <li><a href="#line7">Troubleshooting</a>
                                <ul class="nav">
                                    <li><a href="#line7_1">Terminal Config Tool</a></li>
                                    <li><a href="#line7_2">Installation & Upgrade Problems</a></li>
                                    <li><a href="#line7_3">Start-up Problems</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav >
                </div>
                <div class="col-md-9">
                    <section>
                        <div class="intro1">
                            <ul>
                                <li><strong>Kootnet Sensors : </strong>Documentation</li>
                                <li><strong>Document Version : </strong>0.9</li>
                                <li><strong>Last Updated : </strong>Oct 5th, 2021</li>
                                <li><strong>Author  : </strong>Chad Ermacora</li>
                                <li><strong>Source Code : </strong><a href="https://github.com/chad-ermacora/sensor-rp" target="_blank">GitHub </a></li>
                                <li><strong>License : </strong><a href="https://www.gnu.org/licenses/gpl-3.0.en.html" target="_blank">GPL Ver. 3</a></li>
                            </ul>
                        </div>
                    </section>
                    <!-- end section -->

                    <section id="line1" class="section">
                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Introduction <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-12">
                                <a href="/extras/SensorHardware.jpg" data-rel="prettyPhoto" target="_blank">
                                    <img src="/extras/SensorHardware.jpg" alt="Demo Sensor Units" class="img-responsive img-thumbnail">
                                </a>

                                <p>
                                    Kootnet Sensors is a program used to take sensor readings from multiple sensors and
                                    record them to an SQLite3 database and or upload them online using MQTT or one of
                                    the 3rd party services like Open Sense Map.<br><br>
                                    Kootnet Sensors supports more than 21 hardware sensors.
                                    Supported sensor types include heat, pressure, altitude, humidity, distance,
                                    gas, particulate matter 1/2.5/4/10, light, color, ultra violet, acceleration,
                                    electromagnetic fields, angular velocity (gyroscope) & GPS coordinates.<br><br>
                                    KootNet Sensors requires a Raspberry Pi to utilize hardware sensors but can be
                                    installed on Ubuntu or Debian for “Remote Management”, "Database Graphing" and
                                    centralized recording for multiple sensors.
                                </p>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->
                    </section>
                    <!-- end section -->

                    <section id="line2" class="section">
                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Installation & Removal <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <hr>

                        <h4>Requirements</h4>
                        <strong>Operating System : </strong>Ubuntu, Debian, Raspbian/Raspberry Pi OS<br>
                        <strong>Other Requirements : </strong>Internet Access<br>
                        <strong>Note : </strong><i>Most installs finish within a few minutes but the Raspberry Pi Zero
                        can take up to 30 minutes.</i><br>

                        <strong>Note : </strong><i>You must use the 32bit Raspbian/Raspberry Pi OS for proper Hardware
                        Sensor functionality.</i>

                        <h4><a href="/atpro/supported-sensors-info" target="_blank">
                            Click here for a list of supported sensors and their abilities
                        </a></h4>

                        <h4 id="line2_1">Installation using a GUI Desktop</h4>
                        <p>
                            Installation from a supported GUI based Operating system is fairly straight forward.
                            Click one of the following links to download Kootnet sensors, then double click the
                            downloaded file and look for an install button to start the install process.
                        </p>
                        <p>
                            <a href="https://kootenay-networks.com/installers/KootnetSensors.deb" target="_blank">
                                Current Stable Release
                            </a><br>

                            <a href="https://kootenay-networks.com/installers/dev/KootnetSensors.deb" target="_blank">
                                Latest Developmental Release
                            </a>
                            ** Warning: Developmental Releases can be unstable **
                        </p>

                        <p>
                            Once the install has completed, you can find shortcuts to the various program functions
                            in your operating systems menu. In Raspbian / Raspberry Pi OS, you can find the program
                            shortcuts under "Accessories".
                        </p>
						
						<h4 id="line2_2">Installation using a Terminal</h4>
						
						<p>
                            To install using a terminal, enter the following command, hit enter and wait for it
                            to finish.<br>
                        </p>

						<pre class="brush: bash">wget -O KootnetSensors.deb https://kootenay-networks.com/installers/KootnetSensors.deb && sudo apt-get update && sudo apt-get -y install ./KootnetSensors.deb</pre>

                        <p>
                            If the installation completes successfully, you'll be given the default Username/Password
                            & URL to access the sensor.
                        </p>

                        <h4 id="line2_3">Removal using the Terminal</h4>
                        <p>
                             Run the following Terminal command to uninstall Kootnet Sensors.<br>
                        </p>

						<pre class="brush: bash">sudo apt-get remove kootnet-sensors</pre>

                        <p>
                            <strong><i>Note</i></strong>: The Sensor's Databases, Configurations & Python Virtual
                            Environment will be kept.
                        </p>
                    </section>
                    <!-- end section -->

                    <section id="line3" class="section">
                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Web Portal Introduction <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <h4 id="line3_1"><u>General Overview</u></h4>

                        <p>
                            Kootnet Sensors has a built in HTTPS server (Web Portal) to monitor, manage and operate
                            the Sensor. There is also a 'Remote Management' section in the Web Portal for managing up
                            to 20 remote sensors. Assuming the sensor's IP is 192.168.10.11, you can access the sensor
                            at https://192.168.10.11:10065 from any device with a web browser on the same network.<br><br>
                        </p>

                        <p>
                            <strong><u>Default Web Portal Login</u></strong><br>
                            <strong>User</strong>: Kootnet<br>
                            <strong>Password</strong>: sensors<br><br>
                            <strong>Recommended</strong>: <a href="#line5_5"><i>Change the default Web Portal username
                            and password after install.</i></a><br>

                            <strong>Note</strong>: <i>Find shortcuts to edit configurations and access the Web Portal
                            in the operating systems main menu.</i>
                        </p>

                        <h4 id="line3_2"><u>Dashboard</u></h4>

                        <p>
                            The Dashboard page has all the information you need to get a quick overview
                            of the Sensor's status.
                        </p>

                        <p>
                            <strong>Sensor ID</strong>: A unique identifier for the sensor. Used primarily in 'Sensor Check-Ins' & Graphing.<br><br>

                            <strong>Host name</strong>: The sensor's name, also used as the network name.<br>
                            <strong>IP Address</strong>: The sensor's local IP.<br><br>

                            <strong>Automatic Upgrades</strong>: Status of Kootnet Sensors Automatic Upgrades.<br>
                            <strong>Running Version</strong>: The version of Kootnet Sensors running now.<br><br>

                            <strong>Current Release</strong>: The Latest Stable release of Kootnet Sensors.<br>
                            <strong>Development Release</strong>: The Latest Developmental release of Kootnet Sensors.<br><br>

                            <strong>Debug Logging</strong>: The current state of Debug logging.<br>
                            <strong>Sensor Uptime</strong>: Length of time the local sensor has been online without a reboot or shutdown.<br>
                            <strong>Sensor Reboots</strong>: Amount of times the Sensor has rebooted (According to
                            uptime recordings in the database).<br><br>

                            <strong>System Temperature</strong>: Current Temperature of the System's CPU.<br>
                            <strong>RAM Used/Total</strong>: Amount of RAM in use out of the sensors total RAM.<br>
                            <strong>Drive Used/Total</strong>: Amount of disk space used on the root drive ('/') out of it's total.<br><br>

                            <strong>Operating System</strong>: The Underlying Operating System the Sensor Software is running on top of.<br><br>

                            <strong>Installed Sensors</strong>: Currently Installed Sensors (Most sensors will disable
                            them selves if initialization fails).<br><br>

                            <strong>DateTime Sensor's Timezone</strong>: Date & time on the local Sensor using the Operating Systems's set timezone.<br>
                            <strong>DateTime UTC 0</strong>: Date & time on the local Sensor in UTC0.<br>
                            <strong>Last Updated</strong>: Last date & time the local Kootnet Sensor software was updated (In UTC0).<br><br>

                            All other items pertain to the status of the different aspects of Kootnet Sensors.
                            Available status states include Running, Stopped, Enabled & Disabled.<br>
                        </p>

                        <h4 id="line3_3"><u>Sensor Readings</u></h4>
                        <p>
                            The Sensor Reading's Page gives a live snapshot of all sensor readings.
                        </p>

                        <h4 id="line3_4"><u>Sensors Latency</u></h4>
                        <p>
                            The Sensors Latency Page gives a live snapshot of each sensor's latency.
                            Please note, some sensors latency can vary each time you refresh the page,
                            so you may want to try multiple times to see how stable the latency is.<br><br>

                            When using a sensors latency to decide how often to record to the database, I recommend
                            at least setting it 4x that of the highest latency to prevent slow downs and freeze ups
                            in the program.
                        </p>

                        <h4 id="line3_5"><u>Notes</u></h4>
                        <p>
                            The Notes page is where you can add, modify and remove notes that are stored in the SQL database.
                            Use this to help track note worthy recorded readings or issues, such as "readings
                            on Oct 3rd, 1999 are irregular due to a malfunctioning sensor and can be ignored" or
                            "High temperatures and particulate matter starting June 23rd, 2011 are due to an
                            approaching wild fire".
                        </p>

                        <h4 id="line3_6"><u>Graphing</u></h4>
                        <p>
                            There are currently 2 types of graphing available, Database graphing (Plotly) and Quick graphing.<br><br>

                            Database graphing allows the creation of graphs from the local Main/MQTT Subscriber databases
                            or a custom uploaded Main/MQTT subscriber database. Plotly graphs have more features then
                            Quick graphs, such as zooming into a section of a graph or disabling graphed readings
                            from view. Plotly graphs can take some time to generate
                            depending on how much data is being processed.<br><br>

                            Quick graphing creates line graphs from local Interval recordings and will prevent other
                            web portal operations during it's creation, however, it is generally quicker then
                            using Plotly graphing, but limited in it's features.<br><br>

                            <strong>Note</strong>: <i>Sensor SQL recordings are unaffected by Web Portal operations
                            and will continue to record, even when the web portal is unresponsive.</i>
                        </p>

                        <h3>Database Graphing Options</h3>

                        <p>
                            <strong>Choose a Database</strong>: Select a Database to get readings from.<br>
                            <strong>Remote Sensor ID</strong>: This is required if you are graping from a
                            MQTT Subscriber database. By default, this is the "SensorID" found on the index page of
                            the remote sensor.<br>
                            <strong>SQL Recording Type</strong>: When using a Main database, choose what data to graph.
                            Interval = Interval Recording, Trigger = High/Low + Variance Trigger Recording.<br>
                            <strong>Render Engine</strong>: View Graphs with WebGL (Faster Hardware Rendering) or
                            CPU (Slower Compatibility Mode)<br>
                            <strong>Max Plot Points</strong>: Set the maximum allowed data points to retrieve
                            from the SQLite database.<br>

                            <strong>Start DateTime</strong>: Retrieve Data starting from this Date & Time<br>
                            <strong>End DateTime</strong>: Retrieve Data up to this Date & Time<br>
                            <strong>Add Plot Data after skipping</strong>: This skips the set amount of data points then adds one<br>
                            Example. Skip 12, add one, skip 12, add one, etc, etc<br>
                            <strong>Hour Offset</strong>: Add the set amount of hours to the recorded UTC0 DateTime before plotting<br>
                        </p>

                        <h4 id="line3_7"><u>MQTT Subscriber (Viewing)</u></h4>
                        <p>
                            The MQTT Subscriber page shows information about the MQTT Subscriber service itself,
                            such as if it's enabled, how big the database is and the address of the MQTT Broker it's
                            getting data from.<br><br>

                            There are 2 buttons on this page, one for getting a table of ALL MQTT Subscriber
                            sensors that have been recorded to the database, which contains the sensor ID, host name,
                            IP Address and last contact. The other is for clearing the log containing MQTT Subscriber
                            connections and readings. Please note, this only clears the log NOT the database.<br><br>

                            Underneath the information and buttons is where the most recent connections and data are
                            listed. By default the last 15 sensor connections are listed, showing the Sensor ID,
                            last contact and the readings it sent.
                        </p>

                        <h4 id="line3_8"><u>Sensor Check-ins (Viewing)</u></h4>
                        <p>
                            The Sensor Checkins page shows information about the Sensor Checkin server itself, such as
                            if it's enabled, how big the database is and number of sensors in the database.

                            There are 4 buttons on the page listed below<br><br>

                            <strong>View Checkins Sensors List</strong>: Opens a new page containing a complete list of
                            sensors that have checked in. Each sensor shows it's Sensor ID, host name, IP address,
                            software version, first contact and Last contact. Sensors are ordered by most recent
                            contact.<br><br>

                            <strong>Open Sensor Search</strong>: Opens a new page where you can past a Sensor ID to get
                            the sensor's information, including log entries (if enabled on the sensor).<br><br>

                            <strong>Clear Old Checkin Data</strong>: Every checkin from every sensor is saved into the
                            database but only the last checkin for each sensor is currently viewable.
                            To clear out data and free up space you can delete all but the latest checkins.<br><br>

                            <strong>Delete</strong>: The number above this button is the number of days the sensors
                            has to of gone without a checkin before it's deleted from the database
                            (when you press the Delete button).<br><br>

                            <strong>Note</strong><i>: Currently there is no way to "Un-Delete" something,
                            use caution</i><br><br>

                            Underneath the information and buttons is where the most recent connections are listed.
                            By default the last 15 sensor connections are listed. If you with to adjust settings for
                            this page, you can find them under the <a href="#line4_4a">"Sensor Checkins"</a>
                            settings page.
                        </p>
                    </section>
                    <!-- end section -->

                    <section id="line6" class="section">
                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Remote Management <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <h4 id="line6_1"><u>Sensors List & Login</u></h4>

                        <p>
                            Populate the Sensors list with sensor addresses you wish to interact with using the Remote
                            Management page. The Username and Password are optional and not required for many
                            of the "Checks & Downloads" but if you wish to use any of the "Configurations" or
                            "System Commands", you will need to enter a valid Username and Password for the remote
                            sensors. <br><br>
                            Multiple lists of IP's can be created, managed and swapped to for easier management of
                            multiple sites or additional sensors.<br><br>

                            <strong>Note</strong>: <i>You can use an IP address, such as 192.168.1.21 or a DNS address
                            such as sensor21.mysensors.org.</i><br>
                            <strong>Note</strong>: <i>If your sensor uses a different port other then the default
                            10065, you can specify it after the IP or DNS address, such as 192.168.1.21:8088.</i><br>
                        </p>

                        <h4 id="line6_2"><u>Sensor Checks & Downloads</u></h4>

                        <p>Checks and Downloads are for gathering information about the remote sensor(s).</p>

                        <p><b><u>View</u></b></p>
                        <p>
                            <strong>Online Status</strong>: Checks and lists the status of all sensors under
                            the Sensors list
                        </p>

                        <p><b><u>Generate Reports</u></b></p>
                        <p>
                            Reports are HTML files that contain sensor information. A line is created for each sensor
                            in the Sensors List.<br><br>

                            <strong>Combination</strong>: Creates all reports, then combines them into a single report<br>
                            <strong>System</strong>: Creates a report containing system related information<br>
                            <strong>Configurations</strong>: Creates a report containing some of the more common
                            configuration settings (Login Required)<br>
                            <strong>Readings</strong>: Lists all available sensor readings for each Kootnet Sensor<br>
                            <strong>Latencies</strong>: Lists all available sensor latencies for each Kootnet Sensor<br>
                        </p>

                        <p><b><u>Generate Zip File</u></b></p>
                        <p>
                            Each option here creates a zip file containing one or more items. For "Sensor Databases"
                            and "Logs" you have the option of doing a direct download, which sends the corresponding
                            zip file from each sensor directly. If you choose this option, you'll need to allow
                            pop-ups in your browser.<br><br>

                            The "Relayed Download" option allows that sensor to download other sensors data to itself,
                            which allows you to access all the sensors data from that single sensor. This can be useful
                            when you have a site with multiple sensors.<br><br>

                            <strong>Note</strong>: <i>Links to Zip downloads only work once, then you must re-create them.</i><br>
                            <strong>Note</strong>: <i>In order for direct downloads to work, you must be on the
                            same network as the corresponding sensors you are downloading from.</i><br><br>

                            <strong>Create "The Big Zip"</strong>: Creates a zip on the local sensor containing
                            a combination report as well as zip files of each sensors databases and logs<br>
                            <strong>Combination Report</strong>: Creates a zip on the local sensor containing
                            a combination report<br>
                            <strong>Sensor Databases</strong>: Creates a zip on the local sensor containing
                            all the sensor's databases<br>
                            <strong>Logs</strong>: Creates a zip on the local sensor containing all the sensor's Logs<br>
                        </p>

                        <h4 id="line6_3"><u>Push Sensor Configurations</u></h4>
                        <p>
                            Sensor configurations can be pushed to one or more remote sensors. Raw text configurations
                            are used here (except for 3rd Party Services). Using the text version of the configurations
                            allows for easy backup + copy paste operations. When you select a configuration, it
                            automatically populates with a default configuration.<br><br>

                            <strong>Note</strong>: <i>For maximum compatibility, be sure to have the same Kootnet Sensors
                            version on both the pushing sensor and receiving sensors.</i><br>
                        </p>

                        <h4 id="line6_4"><u>Push System Commands</u></h4>
                        <p>
                            Use the various buttons to initiate upgrades, restarts and reboots.
                        </p>
                    </section>
                    <!-- end section -->

                    <section id="line4" class="section">
                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Settings <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->

                            <p>
                                Settings can be accessed from the Web Portal by clicking on the Gear icon on the left
                                hand side of the page.
                            </p>
                        </div>
                        <!-- end row -->

                        <h4 id="line4_1"><u>Main/Primary</u></h4>
                        <p>
                            <strong>HTTPS Port Number</strong>: Port used to access the Sensors HTTPS Web Portal<br>
                            <strong>Date & Time Offset in hours</strong>: When viewing data, Date & Time are adjusted by the set hours<br>
                            <strong>Enable Debug</strong>: Adds extra logging to help with software debugging<br>
                            <strong>Enable Sensor Checkin</strong>: Sends System Information and Logs to the specified Checkin Server<br>
                            <strong>Hours between Checkins</strong>: Hours to wait before sending the next Sensor Checkin<br>
                            <strong>Checkin Server Address & Port</strong>: The IP or DNS Address of the server followed
                            by a colon and port number. Defaults to the developer to help with debugging<br>

                            <strong>Enable Static Offset</strong>: Add the set number to the Environmental Temperature readings<br>
                            <strong>Enable Pi Temperature Correction Factor</strong>: This subtracts the set multiplication
                            of the difference between the Raspberry Pi CPU temperature and the Environmental Temperature.<br>
                            ('Raw Env Temperature' + 'Static Offset') - ((PiTemperature - RawEnvTemperature) x CF)<br><br>

                            <strong>Note</strong>: <i>The database holds the adjusted temperature readings and the
                            amount adjusted in another columns.</i><br>
                        </p>

                        <h4 id="line4_2"><u>Installed Sensors</u></h4>
                        <p>
                            Installed sensors are broken down into 3 tabs, Raspberry Pi hardware, Pimoroni hardware
                            and Other. Most sensors if physically missing or broken will automatically disable
                            them selves in the program.<br><br>

                            You can find "Kootnet Dummy Sensors" under the other tab to simulate sensor readings for
                            demonstration and testing purposes.<br><br>

                            If you have any problems using un-tested sensors and are willing to give me remote access
                            to your sensor for debugging, please contact me through my
                            <a href="https://kootenay-networks.com/?page_id=11" target="_blank">website</a>.
                        </p>

                        <h4 id="line4_3"><u>Display</u></h4>
                        <p>
                            If you have installed a supported hardware display, you can enable it's use here
                            and set what will be displayed at the set interval.
                        </p>

                        <h4 id="line4_4"><u>Sensor Checkin Configuration</u></h4>
                        <p>
                            Sensor Checkins sends diagnostic data to the specified server. Any Kootnet Sensor can be a
                            Checkin Server, see <a href="#line4_4a">Checkin Server Configuration</a>.<br><br>

                            The various options should be fairly self explanatory, however, if you want to send the
                            data to your own Kootnet Sensor, you'll need to use the IP or domain address of the
                            Kootnet Sensor receiving checkins. You will also have to enable the Checkins Server
                            on the receiving Kootnet Sensor.
                        </p>

                        <h4 id="line4_4a"><u>Checkin Server Configuration</u></h4>
                        <p>
                            Enable Sensors Checkin Server to have the local sensor receive checkins from other sensors.
                            You will need to update other Kootnet Sensors to use this sensor's address under the
                            <a href="#line4_4">Sensor Checkins settings</a> page.<br><br>

                            You can adjust how many sensors are shown on the Sensor Checkins page as well as the days
                            used in the 'Sensor Checkins from the past X Days' bar.
                        </p>

                        <h4 id="line4_5"><u>Interval Recording</u></h4>
                        <p>
                            Interval Recording takes selected and installed sensor readings and records them to the
                            SQLite3 Database every set amount of seconds. You can change the interval at which it records
                            as well as what sensors to record. Nothing is recorded for selected but missing sensors.
                        </p>

                        <p>
                            <strong>WARNING</strong>: <i>Setting 'Seconds between recordings' lower then the slowest
                            sensor's latency may produce unexpected results. Check the <a href="#line3_4">Sensor Latency</a>
                            page within the Sensor's Web Portal to find the slowest sensor (AKA Highest latency) and
                            use at least 4x the reading.</i><br>
                        </p>

                        <h4 id="line4_6"><u>High/Low Trigger Recording</u></h4>
                        <p>
                            High/Low Trigger recording only writes to the database on changes of 'state', for instance,
                            if you have a low trigger of 10 and a high trigger of 20,
                            it will be in a 'Normal' state if the number is above 10 but lower then 20,
                            a 'Low' state if the number is below 10 and a 'High' state if above 20.
                        </p>
                        <p>
                            <strong>WARNING</strong>: <i>Setting the 'Seconds between readings' lower then
                            what is set by using the 'Set Seconds to Lowest' button may produce unexpected results,
                            however, the 'Lowest' setting is generated by multiplying the raw delay between
                            readings by 10, so there is a bit of room for adjustment.
                            Remember to account for other aspects of the program that may access the sensor,
                            such as MQTT, Interval Recordings, Other Trigger Recordings, website access,
                            Online Services, etc.</i><br>
                        </p>

                        <h4 id="line4_7"><u>Variance Trigger Recording</u></h4>
                        <p>
                            <strong>WARNING</strong>: <i>Variance Trigger Recording is experimental and requires
                            more resources and sensor access then other types of recording.</i><br><br>

                            Trigger Variance recording writes readings to the SQLite3 database when the readings have
                            changed more then the set "Variance", for example, a set variance of 0.3 would write to the
                            Database when the reading changes from 4.3 to 4.9 as well as if it changed from 4.3 to 3.9.
                            The "Seconds between readings" is how many seconds it waits before getting it's 2nd reading
                            and comparing the difference of the two against the set Variance.
                        </p>
                        <p>
                            <strong>WARNING</strong>: <i>Setting the 'Seconds between readings' lower then
                            what is set by using the 'Set Seconds to Lowest' button may produce unexpected
                            results.</i>
                        </p>

                        <h4 id="line4_8"><u>Email - Reports</u></h4>
                        <p>
                            Send reports automatically to one or more emails in a zip file at the set
                            day/week/month/year + time. You can also generate and send a report to a single email with
                            the click of a button on this page.<br><br>

                            <strong>Note</strong>: <i>You must configure the SMTP settings before Email Reports will function.</i>
                        </p>

                        <h4><u>Email - Graphs</u></h4>

                        <p>
                            Send graphs automatically to one or more emails in a zip file at the set
                            day/week/month/year + time. You can also generate and send a graph to a single email with
                            the click of a button on this page.<br><br>

                            <strong>Note</strong>: <i>You must configure the SMTP settings before Email Graphs will function.</i>
                        </p>

                        <h4><u>Email - SMTP Settings</u></h4>
                        <p>
                            To allow email operations, you will need to get your email provider's SMTP server settings
                            and enter them here.
                        </p>

                        <h4 id="line4_9"><u>MQTT - Publisher</u></h4>
                        <p>
                            The MQTT Publisher sends sensor readings of your choice to an MQTT Broker. By default the
                            MQTT publisher is setup to send readings in a format for another Kootnet Sensor to use it's
                            MQTT Subscriber and record the readings to the MQTT Subscriber database, however, you can
                            also set up MQTT publisher to send each sensor reading to it's own
                            <a href="https://www.hivemq.com/blog/mqtt-essentials-part-5-mqtt-topics-best-practices/" target="_blank">"topic"</a>
                            or create a custom text string using Kootnet Sensor's replacement variables, of which, each
                            replacement variable is replaced by actual sensor readings. When using "Kootnet Sensors
                            format" or the "Custom Single String" options, the MQTT Publisher Topic is the
                            "MQTT Base Topic(s)". If using the "Topic per sensor", each sensor adds the
                            "MQTT Base Topic(s)" in front of it's own topic entry.<br><br>

                            <strong>Note</strong>: <i>Using "Topic per sensor" sends a MQTT message for each sensor,
                            where as "Kootnet Sensors format" and "Custom Single String" use a single MQTT message.
                            Sending multiple messages will increase the overhead cost (Extra data/bandwidth).</i><br><br>

                            <strong>Enable MQTT Publisher</strong>: Enables and start sending selected readings to the
                            MQTT Broker Address<br>

                            <strong>Broker DNS Address or IP</strong>: Enter the DNS or IP Address of the
                            MQTT Broker Server you wish to send readings to<br>

                            <strong>Broker Port #</strong>: Set the MQTT Broker's Port #<br>
                            <strong>Seconds between publishing</strong>: Amount of time in seconds between sending
                            sensor readings to the MQTT broker<br>

                            <strong>Quality of Service Level</strong>: There are 3 QoS options, which are<br>
                            Level 0 = Send data without any verification or retries<br>
                            Level 2 = Keep sending the same data until an acknowledgement packet is received<br>
                            Level 3 = Only dual verified readings are registered, if not verified, it retries. If the
                            same reading is sent more then once, only one will be registered on the MQTT Broker<br><br>

                            <strong>Note</strong>: <i>Both the MQTT Publisher & Broker (Server) must support and
                            enable the QoS level to be effective.</i><br><br>

                            <strong>MQTT Topic Authentication</strong>: If the MQTT Broker server is password protected,
                            enter that information here<br>
                        </p>

                        <h4><u>MQTT - Subscriber</u></h4>
                        <p>
                            The MQTT Subscriber has similar in options to the <a href="#line4_9">MQTT Publisher</a>,
                            but, instead of sending readings to an MQTT Broker, you receive them. Readings are sent
                            shortly after the broker receives them and can be viewed on the Web Portal's
                            "MQTT Subscriber" page. You can also save these readings to the MQTT Subscriber database
                            for centralized recordings using multiple Kootnet sensors.<br><br>

                            MQTT topics can be specified in the "Subscribed Topics" section; By default, it is set
                            to receive all topics (#). The wildcard "#" can be used at any point in the topic,
                            such as KSDRSjk3K/# will receive all sensor readings from the sensor KSDRSjk3K only.
                        </p>

                        <h4><u>MQTT - Broker (Eclipse Mosquitto)</u></h4>
                        <p>
                            Installs & Enables the Eclipse MQTT Mosquitto Server on the local sensor using apt-get.<br>
                            Optionally set a custom <a href="https://mosquitto.org/man/mosquitto-conf-5.html" target="_blank">
                            Mosquitto configuration</a>.
                        </p>

                        <h4 id="line4_10"><u>3rd Party Services</u></h4>
                        <p>
                            The following 3rd party services collect sensor readings to be displayed on their respective
                            websites. Most make this data public and add geolocation data to track where these sensors
                            are getting their data from. Open Sense Map seems to be the most stable of the 3 and supports
                            the most sensors (all of them).
                        </p>

                        <h4><u>Open Sense Map</u></h4>
                        <blockquote>
                            openSenseMap is a platform for open sensor data at which everyone can participate in.
                            This project started in 2015 at the GI@School lab at the Institute for Geoinformatics in
                            Münster, where it is used together with senseBox to educate pupils and citizens, and offer
                            them a platform for sharing sensor data.
                        </blockquote>

                        <p>
                            In order to use <a href="https://opensensemap.org/" target="_blank">Open Sense Map</a>
                            you will need to create an account on their website first, then goto the Registration
                            tab in the Kootnet Sensor's Web Portal to register the sensor to your account.<br><br>

                            Once the Kootnet Sensor has been registered with Open Sense Map, you can then grab the
                            required information from your Open Sense Map account and fill in the Settings tab.<br><br>

                            <strong>Note</strong>: <i>If you add or remove sensors from the Kootnet sensor after
                            registering it with Open Sense Map, you will have to either A) Manually adjust the sensors
                            under your Open Sense Map account - OR - B) Delete the Kootnet Sensor from Open Sense Map and
                            re-register it. Deleting the sensor from Open Sense Map will remove all it's
                            sensor history.</i><br><br>
                        </p>

                        <h4><u>Weather Underground</u></h4>
                        <blockquote>
                            Weather Underground has challenged the conventions around how weather information is shared
                            with the public since 1993. We're immensely proud of the unique products that our community
                            and meteorologists have created to improve people's access to meaningful weather data from
                            around the globe. As the Internet's 1st weather service, we consider ourselves pioneers
                            within our field and we're constantly seeking new data sets and the next technologies
                            that will help us share more data with more people.
                        </blockquote>

                        <p>
                            <a href="https://www.wunderground.com/" target="_blank">Weather Underground</a>
                            has a limited amount of supported sensors, but assuming you have installed one or more
                            on your Kootnet Sensor, you can create an account with Weather Underground and enter
                            the Station ID and Key in the Weather Underground settings on the Kootnet Sensor.
                        </p>

                        <h4><u>Sensor Community (Luftdaten)</u></h4>
                        <blockquote>
                            The OK Lab Stuttgart is part of the program Code for Germany of the Open Knowledge
                            Foundation Germany. The aim of the program is to promote developments in the areas of
                            transparency, Open Data and Citizen Science.<br><br>

                            Regional groups consisting of designers, developers, journalists and others meet regularly
                            in Labs. They develop apps that inform, positively shape and support society and make the
                            work of administrations and authorities more transparent.
                        </blockquote>

                        <p>
                            <a href="https://sensor.community/en/" target="_blank">Sensor Community</a> is by far one
                            of the easiest 3rd party service to setup, but also one of the more finicky ones.
                            In theory, all you need to do is create an account with Luftdaten and register the
                            "Sensor ID" found in the Luftdaten settings on the Kootnet Sensor to your Luftdaten account.
                            The sensor should automatically start posting readings to Luftdaten within a day.
                        </p>
                    </section>
                    <!-- end section -->

                    <section id="line5" class="section">
                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">System <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->

                            <p>
                                You can access the Sensor's System Menu in the Web Portal by clicking on the icon in
                                the top right of the page (to the right of the notification bell) and going to "System".
                            </p>
                        </div>
                        <!-- end row -->

                        <h4 id="line5_1"><u>Databases</u></h4>
                        <p>
                            There are 3 sections in the Database Menu, they include,
                            Information & Downloads, Management & Uploads.<br><br>

                            On the Database Information & Downloads page you can find the size of each database along
                            with a bit of other information. You can also download databases & database backups here.
                            Downloads can be done in either RAW or Zipped format.<br><br>

                            On the Database Management page you can rename, delete or shrink databases & backups.<br><br>

                            On the Database Uploads page you can upload other sensor's databases to use with Graphing or
                            replace one of the 3 primary SQLite3 databases. Databases can be uploaded in RAW or Zip format.<br><br>

                            When uploading a Main database, the previous database is zipped and stored in a backup folder.<br><br>

                            <strong>Main Database Location</strong>: /home/kootnet_data/SensorRecordingDatabase.sqlite<br>
                            <strong>MQTT Subscriber Database Location</strong>: /home/kootnet_data/MQTTSubscriberDatabase.sqlite<br>
                            <strong>Checkin Database Location</strong>: /home/kootnet_data/SensorCheckinDatabase.sqlite<br><br>

                            <strong>Note</strong>: <i>The Main SQLite3 database holds all local sensor recordings as well as Notes.</i><br>
                        </p>

                        <h4 id="line5_2"><u>View Versions & Configurations</u></h4>
                        <p>
                            The first page displays the current running version of Kootnet Sensors and many of it's
                            Python modules. The other pages give a more "Raw" view of each configuration file.
                        </p>

                        <h4 id="line5_3"><u>Networking</u></h4>

                        <p>
                            Under networking you can set the hostname of the sensor, add a Static wireless IP,
                            enable DHCP & configure a wireless network to auto connect to.
                            You must set the two character
                            <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" target="_blank">country code</a>
                            in this section before the wireless will function.
                        </p>


                        <h4 id="line5_4"><u>SSL</u></h4>
                        <p>
                            Use this section to create a new self signed SSL certificate or upload a custom one for
                            3rd party verification, which will prevent the warning page when first accessing the sensor
                            Web Portal. Please note, uploading invalid certificates can result in the inability to
                            use the Kootnet Sensors Web Portal. If you are unable to access the Web Portal after
                            changing the certificate, login to the Kootnet Sensor locally
                            (with a keyboard/mouse/monitor) and create a new self signed SSL certificate through the
                            <a href="#line7_1">Terminal Configuration Tool</a>.
                        </p>


                        <h4 id="line5_5"><u>Change Login</u></h4>
                        <p>
                            Change the username & password for logging into the Web Portal. If you do not know the
                            current username and password, you can reset them using the
                            <a href="#line7_1">Terminal Configuration Tool</a>.
                        </p>

                        <h4 id="line5_6"><u>Upgrades & Power</u></h4>
                        <p>
                            Find buttons to upgrade Kootnet Sensors, the Operating System & Python Modules.
                            Power functions to restart the program, restart the system & shutdown the system
                            are located here as well.
                        </p>

                        <h4 id="line5_7"><u>Logs</u></h4>
                        <p>
                            You can access the Sensor's Logs in the Web Portal by clicking on the icon in the top
                            right of the page (to the right of the notification bell) and going to "Logs".<br><br>

                            The Logs are broken up into 3 tabs, Primary, Network and Sensors.<br><br>

                            <strong>Default Log Location</strong>: /home/kootnet_data/logs/<br>
                            <strong>Primary log</strong>: General program operations<br>
                            <strong>Network log</strong>: Network operations<br>
                            <strong>Sensors log</strong>: Hardware sensor operations<br>
                        </p>
                    </section>
                    <!-- end section -->

                    <section id="line7" class="section">
                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Troubleshooting <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <strong>Note</strong>: <i>You may find useful information in the program
                        <a href="#line5_7">logs</a> to help diagnose issues.</i>

                        <h4 id="line7_1"><u>Terminal Configuration Tool</u></h4>
                        <p>
                            The Terminal Configuration Tool is a command line program used to configure the local sensor.
                            It can be run, even when the main Kootnet Sensors program won't run. Open it from the
                            local sensors operating system programs menu or by running the command below in a terminal.
                        </p>

                        <pre class="brush: bash">ks-tct</pre><br>

                        <p>
                            From the TCT you can edit the primary config, installed sensors, reset all configurations,
                            overwrite the Web Portal login, update the program's Python modules, upgrade the sensor software,
                            create a new self-signed SSL certificate, Enable/Disable Kootnet Sensors auto-start,
                            restart the sensor software and finally run a local test on the sensor.<br><br>
                        </p>

                        <h3 id="line7_2"><u>Installation & Upgrade Problems</u></h3>

                        <p>
                            Installation issues can occur for various reasons. Here are a few common causes and fixes.<br><br>

                            <strong>Internet Connection Issues</strong><br>
                            <strong><i>Errors may include</i></strong>: Timeout messages, server unresponsive,
                            failed to satisfy dependencies<br>

                            <strong>Fix: </strong>Find a more stable Internet connection or use an ethernet connection
                            instead of wireless<br><br>

                            <strong>Unresponsive Servers</strong> (Such as the Raspberry Pi Repositories)<br>
                            <strong><i>Errors may include</i></strong>: Timeout messages, server unresponsive,
                            failed to satisfy dependencies<br>

                            <strong>Fix: </strong>Wait 5 or 10 minutes and try again OR change your default apt-get repository<br>
                        </p>

                        <h3 id="line7_3"><u>Kootnet Sensors Start-up Problems</u></h3>

                        <p>
                            <strong>Invalid Configurations</strong><br>
                            <strong><i>Errors may include</i></strong>: Unable to access Web Portal, program crashes on start<br>
                            <strong>Fix: </strong>Run the <a href="#line7_1">Terminal Configuration Tool</a>
                            and reset all configurations
                        </p>

                        <p>
                            <strong>Bad Hardware or File Corruption</strong> (Such as a corrupt SD Card)<br>
                            <strong><i>Errors may include</i></strong>: Missing dependencies in the Kootnet Sensor logs<br>
                            <strong>Possible Fixes:</strong><br>
                            1. Ensure the Sensor is Online, then run "Upgrade Kootnet Sensors (Clean HTTP)" from the
                            <a href="#line7_1">Terminal Configurations Tool</a><br>
                            2. Do a fresh flash of Raspbian on the SD card and <a href="#line2">re-install Kootnet Sensors</a><br>
                            3. Replace your current SD card and <a href="#line2">re-install Kootnet Sensors</a><br>
                            4. Try a different Raspberry Pi and <a href="#line2">install Kootnet Sensors</a><br><br>

                            <strong>Note</strong>: <i>You may want to copy the <a href="#line5_1">main SQL3 database</a>
                            to save your sensor recordings & notes before flashing the SD card.</i>
                        </p>
                    </section>
                    <!-- end section -->
                </div>
                <!-- // end .col -->
            </div>
            <!-- // end .row -->
        </div>
        <!-- // end container -->
    </div>
    <!-- end wrapper -->

    <script src="/extras/jquery-3.6.0.min.js"></script>
    <script src="/documentation/js/bootstrap.min.js"></script>
    <script src="/documentation/js/retina.js"></script>
    <script src="/documentation/js/wow.js"></script>
    <script src="/documentation/js/jquery.prettyPhoto.js"></script>

    <!-- CUSTOM PLUGINS -->
    <script src="/documentation/js/custom.js"></script>
    <script src="/documentation/js/main.js"></script>

    <script src="/documentation/js/syntax-highlighter/scripts/shCore.js"></script>
	<script src="/documentation/js/syntax-highlighter/scripts/shBrushBash.js"></script>

</body>
</html>
